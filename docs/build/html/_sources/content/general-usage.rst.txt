.. _general_link:

#############
General Usage
#############

-------------------------
Getting Started
-------------------------
| 1. If this is your first time analyzing a given dataset, you should press :data:`Skip` on the opening page.
.. image:: images/page_one.gif
  :width: 700
  :align: center
|
| 2. Select the organism of interest you would like to model your data.
| 3. Select an output location for files generated by Metaboverse.
.. image:: images/page_two.gif
  :width: 700
  :align: center
|
| 4. Provide the following variables for your model.
| a) Provide the appropriate data files for your -omics data. Please see the :ref:`Data Inputs` sub-heading for more information.
| b) Provide a name for your experiment/model.
| c) Provide the appropriate experimental type. In this case, I am providing timecourse metabolomics data, so I will select that option.
| d) When processing a timecourse or multi-condition dataset, you will then be asked to provide the appropriate sample labels. These should be separated by commas, and should appear in the same order as listed in the dataframe.
| e) Select these modification options if desired.
|     - *Broadcast gene expression to proteins*: Check to broadcast gene expression values to proteins when protein values are not available (checked by default).
|     - *Consider modifiers in reaction collapsing*: Check to include modifiers in reaction collapsing. Catalysts are included as outputs, inhibitors are included as inputs. Please refer to documentation for more information.
| f) Add or remove any items you wish to not be displayed in the network visualizations.
.. image:: images/step_four.png
  :width: 700
  :align: center
|
.. image:: images/page_three.gif
  :width: 700
  :align: center
|
| 5. Build your network model. After your network model has been built, you will have the option to perform regulatory hotspot identification, model perturbation networks, or perform general visualization of pathways and components by clicking on the appropriate buttons at the bottom of the screen that will appear once Metaboverse has finished processing your data.
.. image:: images/step_five.png
  :width: 700
  :align: center
|
--------------------------------------------------
Regulatory Hotspot Identification (Motif Analysis)
--------------------------------------------------
| Regulatory patterns can be searched for in the global reaction network using this page. Users can select different motif types by clicking on the appropriate buttons and adjusting their thresholds as necessary.
|
| Currently, these motif types are available:
| 1. **Average**: This operates by averaging the measured values on each side of a reaction (inputs vs outputs) and calculating the absolute difference. If that difference is greater than the threshold, that reaction will be registered as a motif.
| 2. **MaxMax**: Compare the absolute maximum values between reactants and products that pass the provided threshold.
| 3. **MaxMin**: Compare the absolute maximum and minimum values between reactants and products, or products and reactants, respectively, that pass the provided threshold.
| 4. **Sustained**: Find instances of sustained perturbation along a reaction where there are both an input and an output that are not the same molecule with changes above the selected threshold.
| 5. **ModReg**: Find instances with one regulated modifier and one core component in the reaction.
| 6. **TransReg**: Find instances where a component is the same for input and output, is regulated, along with a modifier being regulated.
| 7. **PathMax**: Compare the absolute maximum and minimum values across a pathway.
| 8. **PathCov**: Compare total coverage of reactions with at least one measured component in pathways.
|
| Users can then select a given motif, view the pathways that reaction is present in across the global reaction network, select a pathway to view, and see all other patterns of that type available in that pathway.
.. image:: images/motif_search.gif
  :width: 700
  :align: center
|
| If the model includes timecourse or multi-condition data, the patterns present at each timepoint or condition can be viewed.
.. image:: images/motif_time.png
  :width: 700
  :align: center
|
| Users can also choose to include the following modifications in the motif search:
| a) **Use Modifiers**: Check to include modifiers in motif analysis. Catalysts are included as outputs, inhibitors are included as inputs. You will need to re-run the motif to include modifiers.
| b) **Exclude Hubs**: Exclude high-hub components from consideration in the motif search. This will remove hubs with more than 100 connections. You will need to re-run the motif to include modifiers.
.. image:: images/motif_options.png
  :width: 250
  :align: center
|
-----------------------------------
General Visualization
-----------------------------------
| Users can explore classical pathways and all components of the network interactively by navigating to the :data:`Visualization` page.
|
| a) At the top of the legend, reference to the node types are displayed. Grey nodes are reactions, nodes with solid outlines are measured, and nodes with dashed outlines are inferred using the gene broadcasting feature. Components with significant statistical values based on the threshold (defined in section d) are bolded. Users can hover across the color scale to see what color corresponds to what value.
| - **Motif reaction nodes will be enlarged and outlined in bold purple.**
| b) Relationship types between nodes are explained in this section of the legend.
| c) Users can toggle component, reaction, and expression labels on and off using the appropriate buttons. Users can also toggle gene nodes and compartment shading on and off with the appropriate buttons. Users can also press the :data:`Save Graph` to select the viewed network to a :data:`.png` file. Users can decide whether to show collapsed reactions, or to show the full, non-collapsed pathway of reactions that would have been collapsed. Collapsed reactions are displayed by default. Users can also open the selected pathway in Reactome to view a more classical representation of the pathway.
| d) Users can modify the number of neighbors to plot when double-clicking on a node to expand its nearest reaction neighbors. Users can also select a threshold to not display any node with more than the defined number of connections. By modifying the statistic threshold, users can change the minimum statistical value needed to bold the component node for easy discrimination of significant measurements in the network.
| e) Metadata about pathways, reactions, and components, along with warnings or errors, will be displayed in this section of the legend.
| f) Users can select from the following super-menus:
| - *All entities*: A list of all components (metabolites, proteins, etc.)
| - *All pathways*: A list of all pathways
| - *Other*: A list of selected super-pathways that will group pathways in the next drop-down menu. For example, if selecting :data:`Metabolism`, only pathways related to Metabolism will be shown in the next menu.
|
.. image:: images/vis_overview.png
  :width: 700
  :align: center
|
| Users can easily toggle between timepoints or conditions by moving the slider.
.. image:: images/pathway_time.gif
  :width: 700
  :align: center
|
-----------------------------------
Perturbation Network Modeling
-----------------------------------
| Users can explore the role and extent of perturbation within the reaction network in their model by navigating to the appropriate page. Users can modify the perturbation threshold for the fold change or statistical value.
.. image:: images/perturbation_connectivity.gif
  :width: 700
  :align: center
|
-----------------------------------
Nearest Neighborhood Searches
-----------------------------------
| Users interested in exploring a components reaction neighborhood can double-click the component to expand this view. The number of reaction neighbors can be selected, and limits on the number of connections a connecting component can have to be displayed can be modified. This hub selection is particularly helpful for connected components that are involved in several reactions.
.. image:: images/neighbor_search.gif
  :width: 700
  :align: center
|
-----------------------------------
Analyzing Previous Models
-----------------------------------
| Users can load a previously modeled network with their data on it by loading the :data:`.json` file output by Metaboverse when originally generated. This is done on the Home page.
.. image:: images/load_json.gif
  :width: 700
  :align: center
|
| Users can load a previously modeled organism network by loading the :data:`.pickle` file output by Metaboverse when originally generated. This is done on the Curation page.
.. image:: images/load_pickle.gif
  :width: 700
  :align: center
|
-----------------------------------------------
Publishing Data Analyzed with Metaboverse
-----------------------------------------------
| When publishing analyses that used Metaboverse, we recommend attaching the appropriate :data:`.json` file that contains the network with your data overlaid as a supplementary file. This will allow for others to easily reproduce and explore your data.
|
| Users can explore the metadata related to their Metaboverse model by clicking on the :data:`Session Data` tab in the menu once the :data:`.json` file is loaded.
.. image:: images/show_metadata.gif
   :width: 700
   :align: center
|
------------------------
Analysis Video Walkthrough
------------------------
.. raw:: html

    <iframe width="700" height="450" src="https://www.youtube.com/embed/ytTIlBKzq-c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
|
